<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main_layout}">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Start your development with a Design System for Bootstrap 4.">
  <meta name="author" content="Creative Tim">
  <title>HollRoomCommunityReadPage</title>
  <script
          src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <!-- Docs CSS -->

  <script type="text/javascript" th:inline="javascript">
    // $(document).ready(function (){
    //   let category = /*[[${category}]]*/
    //   $("#category").val(category).attr("selected","selected");
    // });
  </script>

</head>

<body>
<div layout:fragment="content" style="background-color: white; padding-top: 20px; padding-bottom: 20px;" >

    <!--<section class="section section-components pb-0" id="section-components">-->
      <div class="container" style="background-color: white; width: 1200px; border:0.1px #0d6efd solid; border-radius: 1%">
        <!--<form action="" method="post" >-->
          <div class="row justify-content-center">
            <div class="col-lg-12">
              <!-- Basic elements -->
              <h2 class="mb-5">
                <span style="font-family: 'CWDangamAsac-Bold', sans-serif; font-size: 1.7em">Posting</span>
              </h2>
              <!-- Buttons -->
              <!--<h3 class="h4 text-success font-weight-bold mb-4">Buttons</h3>-->
              <!-- Button styles -->

            </div>
          </div>

      <!--</section>-->
      <!--<section class="section pb-0 section-components">-->
        <!--<div class="container mb-5">-->
          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">번호</label>
          </div>
          <div class="row">
            <div class="col-lg-4 col-sm-6">
              <div class="form-group" style="background-color: white" >
                <input type="text" th:value="${readinfo.postId}" class="form-control" disabled />
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">작성날짜</label>
          </div>
          <div class="row">
            <div class="col-lg-4 col-sm-6">
              <div class="form-group">
               <!-- <input type="text" value="작성날짜" class="form-control" disabled />-->
                <div th:text="${readinfo.createdAt}"></div>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">제목</label>
          </div>
          <div class="row">
            <div class="col-lg-4 col-sm-6">
              <div class="form-group" style="background-color: white">
                <input type="text" th:value="${readinfo.title}" class="form-control" disabled/>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">작성자</label>
          </div>
          <div class="row">
            <div class="col-lg-4 col-sm-6">
              <div class="form-group" style="background-color: white">
                <input type="text" th:value="${readinfo.userNickname}" class="form-control" disabled />
              </div>
            </div>
          </div>

          <div class="mb-1">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">카테고리</label>
          </div>
          <div class="row">
            <div class="col-lg-4 col-sm-6">
              <!--<select class="form-select" name="category" id="category">
                <option value="자유">자유</option>
                <option value="꿀팁">꿀팁</option>
                <option value="질문">질문</option>
                <option value="자취레시피">자취레시피</option>
              </select>-->
              <input type="text" name="category" th:value="${category}" class="form-control" disabled />
            </div>
          </div>
        <!--</div>-->
      <!--</section>-->
          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">첨부파일</label>
          </div>
        <div class="row">
          <span class="col-lg-12 col-sm-6" th:each="file:${fileList}" style="border: 3px #0d6efd dashed; border-radius: 1%; width: 530px; height: 430px; padding: 10px; margin-left: 20px;
          margin-top: 10px; margin-bottom: 20px;">
          <!--등록한 첨부파일 이미지 출력-->
            <img th:src="@{/imageload/}+${file.fileStoreName}" style="width: 500px; padding-left: 5px; height: 400px;">

          </span>

        </div>

          <div class="mb-3">
            <label class="text-uppercase font-weight-bold" style="font-weight: bold">본문 내용</label>
          </div>
          <div class="form-group mb-4">
            <div style="width: 1100px; height: 400px; background-color: #212529; border: #212529 solid; border-radius: 1%">
              <div th:text="${readinfo.content}" style="color: white;"></div>
            </div>
          </div>
          <div>
            <button type="button" class="btn btn-1 btn-success" th:onclick="|location.href='@{/community/list(category=all,page=0)}'|">목록</button>
            <span th:if="${session.USER_NICKNAME!=null and session.USER_NICKNAME.id==readinfo.id}">
              <input type="button" class="btn btn-primary" value="수정" th:onclick="|location.href='@{/community/read(postId=${readinfo.postId},action=UPDATE)}'|"/>
              <button type="button" class="btn btn-1 btn-danger" th:onclick="|location.href='@{/community/delete(postId=${readinfo.postId})}'|" >삭제</button>
            </span>
            <form action="/hollroom/heart/update1" method="post" th:if="${session.USER_NICKNAME!=null and heartInfo.checkHeart=='0'}"
                  style="margin-top: 10px;"><!--활성화-->
              <input type="hidden" name="heartId" th:value="${heartInfo.heartId}" />
              <input type="hidden" name="postId" th:value="${readinfo.postId}" />
              <button th:if="${session.USER_NICKNAME!=null and heartInfo.checkHeart=='0'}" class="btn btn-1 btn-danger" type="submit">좋아요</button>
              <span th:text="'좋아요 수: '+${readinfo.heartCount}" style="font-weight: bold"></span>
            </form>
            <form action="/hollroom/heart/update0" method="post" th:if="${session.USER_NICKNAME!=null and heartInfo.checkHeart=='1'}"
                  style="margin-top: 10px;"><!--비활성화-->
              <input type="hidden" th:name="heartId" th:value="${heartInfo.heartId}" />
              <input type="hidden" name="postId" th:value="${readinfo.postId}" />
              <button th:if="${session.USER_NICKNAME!=null and heartInfo.checkHeart=='1'}" class="btn btn-1 btn-danger" type="submit" style="background-color: #7f7f80; border: #7f7f80">좋아요</button>
              <span th:text="'좋아요 수: '+${readinfo.heartCount}" style="font-weight: bold"></span>
            </form>
            <span th:if="${session.USER_NICKNAME==null}" th:text="'좋아요 수: '+${readinfo.heartCount}" style="font-weight: bold"></span>
          </div>
        <!--</form>-->
        <div>

          <div class="pt-5 comment-wrap">
            <h3 class="mb-5 heading" style="font-family: 'CWDangamAsac-Bold', sans-serif;">Comments</h3>

          <ul class="comment-list">
            <li class="comment">
              <!--<div class="vcard">
                <img src="/hollroom/images/person_1.jpg" alt="Image placeholder">
              </div>-->
              <form action="/hollroom/community/comments/write" method="post" >
                <input type="hidden" th:name="userId" th:value="${session.USER_NICKNAME.id}" th:if="${session.USER_NICKNAME!=null}" class="form-control"/>
                <input type="hidden" th:name="postId" th:value="${readinfo.postId}" class="form-control"/>
                <div class="form-group mb-4" >
                  <textarea class="form-control form-control-alternative" th:if="${session.USER_NICKNAME!=null}" name="comments" rows="5" cols="80" placeholder="댓글을 작성해 주세요" style="width: 700px; background-color: white; " ></textarea>
                </div>
                <button class="btn btn-1 btn-success" type="submit" th:if="${session.USER_NICKNAME!=null}" style="width: 50px; height: 40px; background-color: #0a53be; border: #0a53be; font-size: 10px; padding: 0;">등록</button>
                <button class="btn btn-1 btn-danger" type="reset" th:if="${session.USER_NICKNAME!=null}" style="width: 50px; height: 40px; background-color: #f4a100; border: #f4a100; font-size: 10px; padding: 0;">취소</button>


              </form>

              <div class="comment-body" style="padding: 5px;" th:each="commentInfo:${comments}">
                <div style="padding: 30px; background-color: #212529; border: #212529 solid; border-radius: 1%">
                  <h3 th:text="${commentInfo.nickName}" style="color: white; font-size: 22px;"></h3>
                  <div class="meta" th:text="${#dates.format(commentInfo.updateAt, 'yyyy-MM-dd')}" style="color: white"></div>
                  <p th:text="${commentInfo.comments}" style="color: white"></p>
                  <input type="hidden" th:name="commentId" th:value="${commentInfo.commentId}" class="form-control"/>
                  <input type="hidden" th:name="postId" th:value="${commentInfo.postId}" class="form-control"/>
                  <button class="btn btn-1 btn-success" type="button"
                          style="width: 50px; height: 40px; background-color: #00ac69; border: #00ac69; font-size: 10px; padding: 0;"
                          th:if="${session.USER_NICKNAME!=null and session.USER_NICKNAME.id==commentInfo.userId}"
                          th:onclick="|location.href='@{/community/comments/update(commentId=${commentInfo.commentId},postId=${commentInfo.postId})}'|">수정</button>
                  <button class="btn btn-1 btn-danger" type="reset" style="width: 50px; height: 40px;  font-size: 10px; padding: 0;"
                          th:if="${session.USER_NICKNAME!=null and session.USER_NICKNAME.id==commentInfo.userId}"
                          th:onclick="|location.href='@{/community/comments/delete(commentId=${commentInfo.commentId},postId=${commentInfo.postId})}'|">삭제</button>

                </div>


                <!--<p><a href="#" class="reply rounded">Reply</a></p>--><!--대댓글 기능 구현 시-->
              </div>
            </li>
          </ul>
          </div>
        </div>
      </div> <!--컨테이너-->

</div>

</body>

</html>